function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function e(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}var r,n=document.querySelector(".message-start"),o=document.querySelector(".message-win"),a=document.querySelector(".message-lose"),c=document.querySelector(".game-score"),i=document.querySelectorAll(".field-row"),u=document.querySelector("button"),s=!1,l=0,f=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];function d(t){switch(r=f,t.key){case"ArrowLeft":m();break;case"ArrowRight":y();break;case"ArrowUp":b(),m(),b();break;case"ArrowDown":b(),y(),b();break;default:return}for(var n=0;n<4;n++)for(var c=0;c<4;c++)r[n][c]!==f[n][c]&&(f=r,p(),g());s&&o.classList.remove("hidden"),h()||(b(),function(){for(var t=function(t){if(r[t].some(function(e,n){return e===r[t][n+1]}))return{v:!0}},n=0;n<4;n++){var o=t(n);if("object"===e(o))return o.v}return!1}())||(a.classList.remove("hidden"),document.removeEventListener("keydown",d))}function m(){h()&&(r=r.map(function(t){var e=t.filter(function(t){return 0!==t});return e.forEach(function(t,r){t===e[r+1]&&(e[r]*=2,e.splice(r+1,1),l+=e[r],2048===e[r]&&(s=!0))}),e.concat(Array(4-e.length).fill(0))}))}function y(){h()&&(v(),m(),v())}function v(){r.forEach(function(t){return t.reverse()})}function h(){for(var t=function(t){if(r[t].some(function(t){return 0===t})||r[t].some(function(e,n){return e===r[t][n+1]}))return{v:!0}},n=0;n<4;n++){var o=t(n);if("object"===e(o))return o.v}return!1}function b(){r=r[0].map(function(t,e){return r.map(function(t){return t[e]})})}function p(){var e,r,n=(e=[],f.forEach(function(t,r){t.forEach(function(t,n){0===t&&e.push([r,n])})}),function(t){if(Array.isArray(t))return t}(r=e[Math.floor(Math.random()*e.length)])||function(t,e){var r,n,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var a=[],c=!0,i=!1;try{for(o=o.call(t);!(c=(r=o.next()).done)&&(a.push(r.value),2!==a.length);c=!0);}catch(t){i=!0,n=t}finally{try{c||null==o.return||o.return()}finally{if(i)throw n}}return a}}(r,2)||function(e,r){if(e){if("string"==typeof e)return t(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,2)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1];f[o][a]=.9>Math.random()?2:4}function g(){for(var t=0;t<4;t++)for(var e=0;e<4;e++){var r=i[t].children[e],n=f[t][e];0===n?(r.textContent="",r.className="field-cell"):(r.textContent=n,r.className="field-cell field-cell--".concat(n))}c.textContent=l}u.addEventListener("click",function(t){document.addEventListener("keydown",d),u.classList.contains("start")?(u.classList.replace("start","restart"),u.innerText="Restart",n.classList.add("hidden")):(s=!1,l=0,f=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],a.classList.contains("hidden")||a.classList.add("hidden"),o.classList.contains("hidden")||o.classList.add("hidden")),p(),p(),g()});
//# sourceMappingURL=index.ea997b2f.js.map
